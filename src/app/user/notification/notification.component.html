<mat-card>
    <mat-card-title color="primary">
        Da li zelite procitana obavestenja?
    </mat-card-title>
    <form (submit)="findAll()" [formGroup]="notificationForm">
        <mat-checkbox formControlName="read" (change)="change($event)">
            Da
        </mat-checkbox><br>
        <button class="button" mat-raised-button color="primary" type="submit">Trazi</button>
    </form>
</mat-card>

<mat-card>
    <mat-card-title color="primary">
        Obavestenja
    </mat-card-title>
    <mat-table [dataSource]="notifications" class="mat-elevation-z8">

        <ng-container matColumnDef="text">
            <mat-header-cell *matHeaderCellDef> Sadrzaj </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.text}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="link">
            <mat-header-cell *matHeaderCellDef> Link do obavestenja </mat-header-cell>
            <mat-cell *matCellDef="let element">
                <button mat-icon-button [routerLink]="['/bookInfo',element.idBook]">
                  <mat-icon>info</mat-icon>
                </button>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="read">
            <mat-header-cell *matHeaderCellDef> Oznaci da je procitano </mat-header-cell>
            <mat-cell *matCellDef="let element">
                <a mat-button (click)="markRead(element._id)">
                    <mat-icon *ngIf="element.read==='0'">image_search</mat-icon>
                </a>
            </mat-cell>
        </ng-container>


        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>

    </mat-table>
</mat-card>

<mat-card>
    <mat-card-title color="primary">
        Pozivi na desavanja
    </mat-card-title>
    <mat-table [dataSource]="invitations" class="mat-elevation-z8">

        <ng-container matColumnDef="text">
            <mat-header-cell *matHeaderCellDef> Tekst </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.text}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="accept">
            <mat-header-cell *matHeaderCellDef> Prihvati poziv </mat-header-cell>
            <mat-cell *matCellDef="let element">
                <button mat-icon-button (click)="acceptInvitation(element._id)">
                    <mat-icon>done</mat-icon>
                </button>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="refuse">
            <mat-header-cell *matHeaderCellDef> Odbaci poziv </mat-header-cell>
            <mat-cell *matCellDef="let element">
                <button mat-icon-button (click)="refuseInvitation(element._id)">
                    <mat-icon>clear</mat-icon>
                </button>
            </mat-cell>
        </ng-container>


        <mat-header-row *matHeaderRowDef="displayedColumnsForEvent"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumnsForEvent;"></mat-row>

    </mat-table>
</mat-card>

<mat-card>
    <mat-card-title color="primary">
        Zahtevi za ucestovanje na desavanjima
    </mat-card-title>
    <mat-table [dataSource]="requests" class="mat-elevation-z8">

        <ng-container matColumnDef="text">
            <mat-header-cell *matHeaderCellDef> Tekst </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.text}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="accept">
            <mat-header-cell *matHeaderCellDef> Prihvati poziv </mat-header-cell>
            <mat-cell *matCellDef="let element">
                <button mat-icon-button (click)="acceptInvitation(element._id)">
                  <mat-icon>done</mat-icon>
              </button>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="refuse">
            <mat-header-cell *matHeaderCellDef> Odbaci poziv </mat-header-cell>
            <mat-cell *matCellDef="let element">
                <button mat-icon-button (click)="refuseInvitation(element._id)">
                  <mat-icon>clear</mat-icon>
              </button>
            </mat-cell>
        </ng-container>


        <mat-header-row *matHeaderRowDef="displayedColumnsForEvent"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumnsForEvent;"></mat-row>

    </mat-table>
</mat-card>